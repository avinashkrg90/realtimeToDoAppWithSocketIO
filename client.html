<!-- no need to change the prewritten code.
complete the script tag code. -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Task Management App</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        #container {
            width: 600px;
            /* margin: 0 auto; */
        }

        #task-list > div {
            padding: 5px;
            /* padding-left: 0; */
            border: 1px solid #ebeaea;
            display: flex;
            justify-content: space-between;
            align-items: inherit;
            align-items: center;
        }

        #task-list div:hover {
            background: #f3f3f3;
        }

        #task-list div input {
            padding: 0;
            height: initial;
            width: initial;
            margin-bottom: 0;
            display: none;
            cursor: pointer;
        }

        #task-list div label {
            position: relative;
            cursor: pointer;
        }

        #task-list div label:before {
            content: '';
            -webkit-appearance: none;
            background-color: transparent;
            border: 2px solid #0079bf;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05), inset 0px -15px 10px -12px rgba(0, 0, 0, 0.05);
            padding: 10px;
            display: inline-block;
            position: relative;
            vertical-align: middle;
            cursor: pointer;
            margin-right: 10px;
        }

        #task-list div input:checked+label:after {
            content: '';
            display: block;
            position: absolute;
            top: 2px;
            left: 9px;
            width: 6px;
            height: 14px;
            border: solid #fff;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        #task-list div input:checked+label:before {
            background: #0079bf;
        }

        #task-list div input:checked+label {
            text-decoration: line-through;
        }

        .delete {
            /* height: 28px; */
            padding: 5px 10px;
            border-radius: 3px;
            background: #e4a32b;
            color: black;
            margin-left: 15px;
            font-size: 15px;
            padding: 11px;
        }

        .delete:hover {
            background: #e0c952;
            cursor: pointer;
        }

        .update {
            /* height: 28px; */
            padding: 5px 10px;
            border-radius: 3px;
            background: #40e849;
            color: black;
            margin-left: 15px;
            font-size: 15px;
            padding: 11px;
        }

        .update:hover {
            background: rgb(135, 239, 166);
            cursor: pointer;

        }

        h1 {
            text-align: center;
        }

        #create-task-form{
            margin-bottom: 10px;
        }

        #create-task-form input {
            width: 80%;
            outline: none;
            font-size: 15px;
            padding: 11px;
            border: 2px solid #d7d6d6;
            margin-bottom: 3px;
        }

        #create-task-form button {
            width: 15%;
            outline: none;
            font-size: 15px;
            padding: 11px;
            border: 2px solid #7745f5;
            margin-bottom: 3px;
            background-color: #9e7af8;
        }

        #create-task-form button:hover {
            width: 15%;
            outline: none;
            font-size: 15px;
            padding: 11px;
            border: 2px solid #7745f5;
            margin-bottom: 3px;
            background-color: #c1adf3;
        }
    </style>
</head>

<body>
    <div id="container">
        <h1>Todo List App for real time sharing</h1>
        <div id="task-form">
            <!-- Create a form to add new tasks -->
            <form id="create-task-form">
                <input type="text" id="task-text" placeholder="Enter a new task" required>
                <button id="create-task" type="submit">Add Task</button>
            </form>
        </div>

        <div id="task-list">
            <!-- Tasks will be displayed here -->
            <!-- <div>
            <input type="checkbox" id="task1" data-id="12" class="custom-checkbox">
            <label for="task1">Buy groceries</label>
            <div>
                <button id="update-task" type="submit">Update</button>
                <button id="delete-task" type="submit">Delete</button>
            </div>
        </div> -->
        </div>
    </div>

    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script>
        const socket = io.connect('http://localhost:3000');

        // -------------------write your code here.--------------------
        const taskInput = document.getElementById("task-text");
        const taskCreateBtn = document.getElementById("create-task");
        const taskList = document.getElementById("task-list");
        const createTaskForm = document.getElementById("create-task-form")

        function addTaskToView(toDo) {
            console.log(toDo)
            let taskDiv = document.createElement('div');
            taskDiv.innerHTML = `
                    <input type="checkbox" id="${toDo.id}" ${toDo.completed ? 'checked' : ''} data-id="${toDo.id}" class="custom-checkbox">
                    <label for="${toDo.id}">${toDo.text}</label>
                    <div>
                        <button id="updateBtn${toDo.id}" data-id="${toDo.id}" type="submit" class="delete">Update</button>
                        <button id="deleteBtn${toDo.id}" data-id="${toDo.id}" type="submit" class="update">Delete</button>
                    </div>
                `;
            taskList.appendChild(taskDiv);
        }

        // Event handler for the task form
        createTaskForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const task = taskInput.value;
            // Emit a 'sendMessage' event to send the message to the server
            console.log(`submit button is pressed, and the task is '${task}'`)
            socket.emit('addTodo', task);

            taskInput.value = '';
        });

        socket.on('newTodoAdded', (toDo) => {
            addTaskToView(toDo);
        });



    </script>
</body>

</html>